<!DOCTYPE html>
<html>
<head>
  <title>Multi-Item Concrete Products Map – Live Map (Jan 21-22, 2026)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <style>
    body{margin:0;padding:0;font-family:Arial,sans-serif}
    #map{width:100%;height:100vh}
    h3{font-size:1.5em;padding:10px;text-align:center;margin:0;background:#1976d2;color:white}
    #location-button{position:absolute;top:60px;left:10px;z-index:1000;padding:10px;background:#fff;border:2px solid #ccc;border-radius:4px;cursor:pointer;font-size:1em;box-shadow:0 2px 6px rgba(0,0,0,.3)}
    #info-panel{position:absolute;top:110px;left:10px;z-index:1000;background:#fff;border:2px solid #ccc;border-radius:4px;padding:10px;max-height:240px;overflow-y:auto;display:none;width:290px;box-shadow:0 2px 6px rgba(0,0,0,.3);font-size:0.93em}
    #info-panel.show{display:block}
    #close-panel{background:none;border:none;color:#1976d2;cursor:pointer;float:right;font-size:1.2em;padding:0;margin:-5px -5px 0 0}
    a{color:#1976d2;text-decoration:none;font-weight:bold}
    #allow-banner{position:fixed;bottom:0;left:0;right:0;background:#fffde7;padding:12px 16px;border-top:2px solid #ffc107;text-align:center;font-size:0.95em;z-index:2000;display:none;box-shadow:0 -2px 8px rgba(0,0,0,.1)}
    #allow-banner.show{display:block}
    #allow-btn{background:#1976d2;color:#fff;padding:6px 14px;border:none;border-radius:4px;cursor:pointer;margin-left:8px}
    @media(max-width:768px){h3{font-size:1.2em}#info-panel{top:100px;width:92%;left:4%}}
  </style>
</head>
<body>
  <h3>Multi-Item Concrete Products<br><small>Granite Grip: Blue=In Stock Retail • Orange=No Stock Low • Cover Stain: Purple=In Stock Retail • Pink=No Stock Low • Sealer: Green=In Stock Retail • Red=No Stock Low • Jan 21-22, 2026</small></h3>
  <button id="location-button">Center on Current Location</button>
  <div id="info-panel"><button id="close-panel">✕</button><div id="info-content"></div></div>
  <div id="allow-banner"><span>This site wants to open directions in your maps app.</span> <button id="allow-btn">Allow</button></div>
  <div id="map"></div>

  <script>
    let map, userMarker, directionsAllowed = false;
    const banner = document.getElementById('allow-banner');
    const allowBtn = document.getElementById('allow-btn');
    const infoPanel = document.getElementById('info-panel');
    const infoPanelClose = document.getElementById('close-panel');
    let currentAddress = '';

    infoPanelClose.addEventListener('click', () => infoPanel.classList.remove('show'));

    function requestDirectionsPermission(address) {
      currentAddress = address;
      if (directionsAllowed) { launchDirections(address); return; }
      banner.classList.add('show');
      allowBtn.onclick = () => {
        directionsAllowed = true;
        banner.classList.remove('show');
        launchDirections(currentAddress);
      };
    }

    function launchDirections(address) {
      const clean = address.replace(/&/g, '%26').trim();
      const enc = encodeURIComponent(clean);
      const isIOS = /iPhone|iPad|iPod/.test(navigator.userAgent);
      const isAndroid = /Android/.test(navigator.userAgent);
      if (isIOS) window.location.href = `http://maps.apple.com/?q=${enc}`;
      else if (isAndroid) window.location.href = `geo:0,0?q=${enc}`;
      else window.open(`https://www.google.com/maps/dir/?api=1&destination=${enc}`, '_blank');
    }

    function initMap() {
      map = new google.maps.Map(document.getElementById("map"), {
        zoom: 7,
        center: { lat: 37.5407, lng: -77.4360 },
        gestureHandling: 'greedy',
        mapTypeControl: false,
        streetViewControl: false
      });

      document.getElementById("location-button").addEventListener("click", () => {
        if (!navigator.geolocation) { alert("Geolocation not supported."); return; }
        navigator.geolocation.getCurrentPosition(pos => {
          const loc = { lat: pos.coords.latitude, lng: pos.coords.longitude };
          map.panTo(loc); map.setZoom(11);
          if (userMarker) userMarker.setPosition(loc);
          else userMarker = new google.maps.Marker({
            position: loc, map,
            icon: "https://maps.google.com/mapfiles/ms/icons/red-dot.png",
            title: "You Are Here"
          });
        }, err => alert("Location error: " + err.message), {enableHighAccuracy: true, timeout: 8000});
      });

      const stores = [
        // Item 1: 5 Gal. Tan Granite Grip Decorative Flat Interior/Exterior Concrete Floor Coating
        {lat:37.6078,lng:-77.3747,title:"#4624 Mechanicsville VA",addr:"7251 Bell Creek Rd, Mechanicsville VA",price:"$302.00",stock:0,item:"Granite Grip"},
        {lat:37.5985,lng:-77.5166,title:"#4632 Richmond VA",addr:"6501 W Broad St, Richmond VA",price:"$302.00",stock:0,item:"Granite Grip"},
        {lat:37.7089,lng:-77.4594,title:"#4653 Ashland VA",addr:"10233 Lakeridge Parkway, Ashland VA",price:"$21.00",stock:0,item:"Granite Grip"},
        {lat:37.5057,lng:-77.6087,title:"#4631 Richmond VA",addr:"1386 Car Mia Way, Richmond VA",price:"$302.00",stock:0,item:"Granite Grip"},
        {lat:37.6521,lng:-77.5668,title:"#4611 Glen Allen VA",addr:"11260 W Broad St, Glen Allen VA",price:"$302.00",stock:2,item:"Granite Grip"},
        {lat:37.4505,lng:-77.6488,title:"#4627 Midlothian VA",addr:"12300 Chattanooga Plaza, Midlothian VA",price:"$302.00",stock:0,item:"Granite Grip"},
        {lat:37.3628,lng:-77.4337,title:"#4616 Chester VA",addr:"12300 Jefferson Davis Hwy, Chester VA",price:"$302.00",stock:8,item:"Granite Grip"},
        {lat:37.2694,lng:-77.4071,title:"#4633 Colonial Heights VA",addr:"2600 Conduit Rd, Colonial Heights VA",price:"$302.00",stock:0,item:"Granite Grip"},
        {lat:37.2911,lng:-76.7447,title:"#4635 Williamsburg VA",addr:"6700 Mooretown Rd, Williamsburg VA",price:"$302.00",stock:7,item:"Granite Grip"},
        {lat:38.3071,lng:-77.4932,title:"#4620 Fredericksburg VA",addr:"1201 Gateway Blvd, Fredericksburg VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:38.2978,lng:-77.5301,title:"#4660 Fredericksburg VA",addr:"5771 Plank Road, Fredericksburg VA",price:"$21.00",stock:0,item:"Granite Grip"},
        {lat:37.4067,lng:-76.5347,title:"#4650 Gloucester VA",addr:"6921 Walton Lane, Gloucester VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:37.0911,lng:-76.4889,title:"#4613 Newport News VA",addr:"325 Chatham Dr, Newport News VA",price:"$21.00",stock:0,item:"Granite Grip"},
        {lat:38.4578,lng:-77.4089,title:"#4637 Stafford VA",addr:"305 Worth Avenue, Stafford VA",price:"$21.00",stock:0,item:"Granite Grip"},
        {lat:37.0497,lng:-76.3847,title:"#4612 Hampton VA",addr:"1413 N Armistead Ave, Hampton VA",price:"$302.00",stock:0,item:"Granite Grip"},
        {lat:36.728,lng:-78.1422,title:"#4659 South Hill VA",addr:"250 Frank D Harris Dr, South Hill VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:38.6739,lng:-77.2528,title:"#4604 Woodbridge VA",addr:"14025 Foulger Square, Woodbridge VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:36.7756,lng:-76.2847,title:"#4622 Chesapeake VA",addr:"2421 Old Taylor Rd, Chesapeake VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:38.6211,lng:-76.9256,title:"#2563 Waldorf MD",addr:"12050 Jefferson Farm Pl, Waldorf MD",price:"$302.00",stock:3,item:"Granite Grip"},
        {lat:38.7322,lng:-77.7847,title:"#8552 Warrenton VA",addr:"267 Alwington Blvd, Warrenton VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:38.7689,lng:-77.4733,title:"#4648 Manassas VA",addr:"8805 Liberia Ave, Manassas VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:36.8706,lng:-76.2094,title:"#4615 Norfolk VA",addr:"1261 N Military Hwy, Norfolk VA",price:"$302.00",stock:0,item:"Granite Grip"},
        {lat:38.7483,lng:-77.0847,title:"#4638 Alexandria VA",addr:"7710 Richmond Hwy, Alexandria VA",price:"$63.00",stock:0,item:"Granite Grip"},
        {lat:38.7828,lng:-77.1878,title:"#4617 Springfield VA",addr:"6691 Frontier Rd, Springfield VA",price:"$21.00",stock:0,item:"Granite Grip"},
        {lat:38.7867,lng:-77.5189,title:"#4607 Manassas VA",addr:"7486 Stream Walk Ln, Manassas VA",price:"$302.00",stock:4,item:"Granite Grip"},

        // Item 2: Cover Stain 5 gal. White Oil-Based Interior/Exterior Primer and Sealer
        {lat:37.6078,lng:-77.3747,title:"#4624 Mechanicsville VA",addr:"7251 Bell Creek Rd, Mechanicsville VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.5985,lng:-77.5166,title:"#4632 Richmond VA",addr:"6501 W Broad St, Richmond VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.7089,lng:-77.4594,title:"#4653 Ashland VA",addr:"10233 Lakeridge Parkway, Ashland VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.5057,lng:-77.6087,title:"#4631 Richmond VA",addr:"1386 Car Mia Way, Richmond VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.6521,lng:-77.5668,title:"#4611 Glen Allen VA",addr:"11260 W Broad St, Glen Allen VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.4505,lng:-77.6488,title:"#4627 Midlothian VA",addr:"12300 Chattanooga Plaza, Midlothian VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.3628,lng:-77.4337,title:"#4616 Chester VA",addr:"12300 Jefferson Davis Hwy, Chester VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.2694,lng:-77.4071,title:"#4633 Colonial Heights VA",addr:"2600 Conduit Rd, Colonial Heights VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.2911,lng:-76.7447,title:"#4635 Williamsburg VA",addr:"6700 Mooretown Rd, Williamsburg VA",price:"$183.00",stock:3,item:"Cover Stain"},
        {lat:38.3071,lng:-77.4932,title:"#4620 Fredericksburg VA",addr:"1201 Gateway Blvd, Fredericksburg VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:38.2978,lng:-77.5301,title:"#4660 Fredericksburg VA",addr:"5771 Plank Road, Fredericksburg VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.4067,lng:-76.5347,title:"#4650 Gloucester VA",addr:"6921 Walton Lane, Gloucester VA",price:"$183.00",stock:3,item:"Cover Stain"},
        {lat:37.0911,lng:-76.4889,title:"#4613 Newport News VA",addr:"325 Chatham Dr, Newport News VA",price:"$183.00",stock:12,item:"Cover Stain"},
        {lat:38.4578,lng:-77.4089,title:"#4637 Stafford VA",addr:"305 Worth Avenue, Stafford VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:37.0497,lng:-76.3847,title:"#4612 Hampton VA",addr:"1413 N Armistead Ave, Hampton VA",price:"$183.00",stock:9,item:"Cover Stain"},
        {lat:36.728,lng:-78.1422,title:"#4659 South Hill VA",addr:"250 Frank D Harris Dr, South Hill VA",price:"$17.00",stock:0,item:"Cover Stain"},
        {lat:38.6739,lng:-77.2528,title:"#4604 Woodbridge VA",addr:"14025 Foulger Square, Woodbridge VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:36.7756,lng:-76.2847,title:"#4622 Chesapeake VA",addr:"2421 Old Taylor Rd, Chesapeake VA",price:"$17.00",stock:0,item:"Cover Stain"},
        {lat:38.6211,lng:-76.9256,title:"#2563 Waldorf MD",addr:"12050 Jefferson Farm Pl, Waldorf MD",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:38.7322,lng:-77.7847,title:"#8552 Warrenton VA",addr:"267 Alwington Blvd, Warrenton VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:38.7689,lng:-77.4733,title:"#4648 Manassas VA",addr:"8805 Liberia Ave, Manassas VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:36.8706,lng:-76.2094,title:"#4615 Norfolk VA",addr:"1261 N Military Hwy, Norfolk VA",price:"$183.00",stock:10,item:"Cover Stain"},
        {lat:38.7483,lng:-77.0847,title:"#4638 Alexandria VA",addr:"7710 Richmond Hwy, Alexandria VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:38.7828,lng:-77.1878,title:"#4617 Springfield VA",addr:"6691 Frontier Rd, Springfield VA",price:"$183.00",stock:0,item:"Cover Stain"},
        {lat:38.7867,lng:-77.5189,title:"#4607 Manassas VA",addr:"7486 Stream Walk Ln, Manassas VA",price:"$183.00",stock:0,item:"Cover Stain"},

        // Item 3: 5 gal. Supreme Seal High-Gloss Low VOC Solvent-Based Concrete Sealer
        {lat:37.6078,lng:-77.3747,title:"#4624 Mechanicsville VA",addr:"7251 Bell Creek Rd, Mechanicsville VA",price:"$199.00",stock:2,item:"Sealer"},
        {lat:37.5985,lng:-77.5166,title:"#4632 Richmond VA",addr:"6501 W Broad St, Richmond VA",price:"$8.40",stock:0,item:"Sealer"},
        {lat:37.7089,lng:-77.4594,title:"#4653 Ashland VA",addr:"10233 Lakeridge Parkway, Ashland VA",price:"$199.00",stock:2,item:"Sealer"},
        {lat:37.5057,lng:-77.6087,title:"#4631 Richmond VA",addr:"1386 Car Mia Way, Richmond VA",price:"$199.00",stock:0,item:"Sealer"},
        {lat:37.6521,lng:-77.5668,title:"#4611 Glen Allen VA",addr:"11260 W Broad St, Glen Allen VA",price:"$199.00",stock:0,item:"Sealer"},
        {lat:37.4505,lng:-77.6488,title:"#4627 Midlothian VA",addr:"12300 Chattanooga Plaza, Midlothian VA",price:"$199.00",stock:4,item:"Sealer"},
        {lat:37.3628,lng:-77.4337,title:"#4616 Chester VA",addr:"12300 Jefferson Davis Hwy, Chester VA",price:"$199.00",stock:1,item:"Sealer"},
        {lat:37.2694,lng:-77.4071,title:"#4633 Colonial Heights VA",addr:"2600 Conduit Rd, Colonial Heights VA",price:"$8.40",stock:0,item:"Sealer"},
        {lat:37.2911,lng:-76.7447,title:"#4635 Williamsburg VA",addr:"6700 Mooretown Rd, Williamsburg VA",price:"N/A",stock:0,item:"Sealer"},
        {lat:38.3071,lng:-77.4932,title:"#4620 Fredericksburg VA",addr:"1201 Gateway Blvd, Fredericksburg VA",price:"$42.00",stock:0,item:"Sealer"},
        {lat:38.2978,lng:-77.5301,title:"#4660 Fredericksburg VA",addr:"5771 Plank Road, Fredericksburg VA",price:"$199.00",stock:2,item:"Sealer"},
        {lat:37.4067,lng:-76.5347,title:"#4650 Gloucester VA",addr:"6921 Walton Lane, Gloucester VA",price:"N/A",stock:0,item:"Sealer"},
        {lat:37.0911,lng:-76.4889,title:"#4613 Newport News VA",addr:"325 Chatham Dr, Newport News VA",price:"N/A",stock:0,item:"Sealer"},
        {lat:38.4578,lng:-77.4089,title:"#4637 Stafford VA",addr:"305 Worth Avenue, Stafford VA",price:"$199.00",stock:0,item:"Sealer"},
        {lat:37.0497,lng:-76.3847,title:"#4612 Hampton VA",addr:"1413 N Armistead Ave, Hampton VA",price:"N/A",stock:0,item:"Sealer"},
        {lat:36.728,lng:-78.1422,title:"#4659 South Hill VA",addr:"250 Frank D Harris Dr, South Hill VA",price:"N/A",stock:0,item:"Sealer"},
        {lat:38.6739,lng:-77.2528,title:"#4604 Woodbridge VA",addr:"14025 Foulger Square, Woodbridge VA",price:"$8.40",stock:0,item:"Sealer"},
        {lat:36.7756,lng:-76.2847,title:"#4622 Chesapeake VA",addr:"2421 Old Taylor Rd, Chesapeake VA",price:"N/A",stock:0,item:"Sealer"},
        {lat:38.6211,lng:-76.9256,title:"#2563 Waldorf MD",addr:"12050 Jefferson Farm Pl, Waldorf MD",price:"$8.40",stock:0,item:"Sealer"},
        {lat:38.7322,lng:-77.7847,title:"#8552 Warrenton VA",addr:"267 Alwington Blvd, Warrenton VA",price:"$8.40",stock:0,item:"Sealer"},
        {lat:38.7689,lng:-77.4733,title:"#4648 Manassas VA",addr:"8805 Liberia Ave, Manassas VA",price:"$42.00",stock:0,item:"Sealer"},
        {lat:36.8706,lng:-76.2094,title:"#4615 Norfolk VA",addr:"1261 N Military Hwy, Norfolk VA",price:"N/A",stock:0,item:"Sealer"},
        {lat:38.7483,lng:-77.0847,title:"#4638 Alexandria VA",addr:"7710 Richmond Hwy, Alexandria VA",price:"$8.40",stock:0,item:"Sealer"},
        {lat:38.7828,lng:-77.1878,title:"#4617 Springfield VA",addr:"6691 Frontier Rd, Springfield VA",price:"$8.40",stock:0,item:"Sealer"},
        {lat:38.7867,lng:-77.5189,title:"#4607 Manassas VA",addr:"7486 Stream Walk Ln, Manassas VA",price:"$199.00",stock:5,item:"Sealer"}
      ];

      const markers = [];
      stores.forEach(s => {
        const priceNum = parseFloat(s.price.replace("$", "")) || 0;
        const isStockRetail = s.stock > 0 && priceNum >= 180;
        const isNoStockLow = s.stock === 0 && (priceNum <= 63 || s.price === "N/A");

        let iconUrl = "https://maps.google.com/mapfiles/ms/icons/yellow-dot.png";
        if (s.item === "Granite Grip") {
          iconUrl = isStockRetail ? "https://maps.google.com/mapfiles/ms/icons/blue-dot.png" : isNoStockLow ? "https://maps.google.com/mapfiles/ms/icons/orange-dot.png" : iconUrl;
        } else if (s.item === "Cover Stain") {
          iconUrl = isStockRetail ? "https://maps.google.com/mapfiles/ms/icons/purple-dot.png" : isNoStockLow ? "https://maps.google.com/mapfiles/ms/icons/pink-dot.png" : iconUrl;
        } else if (s.item === "Sealer") {
          iconUrl = isStockRetail ? "https://maps.google.com/mapfiles/ms/icons/green-dot.png" : isNoStockLow ? "https://maps.google.com/mapfiles/ms/icons/red-dot.png" : iconUrl;
        }

        const status = isStockRetail ? "In Stock @ Retail" : isNoStockLow ? "No Stock @ Clearance/Low" : "Other";
        const html = `<strong>${s.title} (${s.item})</strong><br>${s.addr}<br>Price: ${s.price}<br>Status: ${status} (${s.stock} units)<br><a href="#" data-address="${s.addr}">Get Directions</a>`;

        const marker = new google.maps.Marker({
          position: { lat: s.lat, lng: s.lng },
          map: map,
          title: `${s.title} (${s.item})`,
          icon: iconUrl
        });

        marker.addListener("click", () => {
          const iw = new google.maps.InfoWindow({ content: html, maxWidth: 290 });
          iw.open(map, marker);
          document.getElementById("info-content").innerHTML = html;
          infoPanel.classList.add("show");
          
          const dirBtn = document.querySelector('#info-content a');
          if (dirBtn) {
            dirBtn.addEventListener('click', (e) => {
              e.preventDefault();
              requestDirectionsPermission(dirBtn.getAttribute('data-address'));
            });
          }
        });

        markers.push(marker);
      });

      map.addListener("click", () => infoPanel.classList.remove("show"));
    }
  </script>
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBGkKq-mR_Yb1xYsGDNJqJQaxQekWzWyOQ&callback=initMap"></script>
</body>
</html>